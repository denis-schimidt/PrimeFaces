<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head> 
	<title>Sistema de Notas Fiscais</title>
	<h:outputScript name="jsf.js" library="javax.faces" />
	<h:outputStylesheet library="css" name="local.css" />
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
</h:head>

<h:body>

	<h:form id="formCadastroProduto">
		<h:outputLabel rendered="#{empty produtoMB.produto.id}" styleClass="tituloOperacaoTela" value="Sistema de Notas Fiscais > Novo Produto" />
		<h:outputLabel rendered="#{not empty produtoMB.produto.id}" styleClass="tituloOperacaoTela" value="Sistema de Notas Fiscais > Editar Produto" />

		<div class="linhaEmBranco"/>

		<p:fieldset legend="Dados do Produto">
		
			<h:panelGroup layout="block">
				<h:panelGrid columns="2" styleClass="col-md-2">
					<h:outputLabel value="Nome:" for="campoNome" />
					<p:inputText value="#{produtoMB.produto.nome}" id="campoNome" size="50" required="true"/>
					<h:outputLabel value="Descrição:" for="campoDescricao" />
					<p:inputTextarea id="campoDescricao" value="#{produtoMB.produto.descricao}" cols="150" rows="4" required="true"/>
					<h:outputLabel value="Preço:" for="campoPreco" />
					<p:inputText id="campoPreco" value="#{produtoMB.produto.preco}" type="currency" size="20" required="true"/>
				</h:panelGrid>
			
				<div class="linhaEmBranco"/>
				
				<h:panelGroup layout="block">
					<p:commandButton id="botaoGravar" styleClass="btn" process="@form" value="Gravar" action="#{produtoMB.salvarProduto}" 
						update="@form :formListagemProdutos" icon="ui-icon-disk" />
				
					<span class="espacamento-entre-botoes"/>
					
					<p:commandButton id="botaoCancelar" styleClass="btn" value="Cancelar" actionListener="#{produtoMB.cancelarAlteracaoProduto}" 
						rendered="#{not empty produtoMB.produto.id}" icon="ui-icon-arrowrefresh-1-w" update="@form" />
				</h:panelGroup>
			</h:panelGroup>			
			
		</p:fieldset>
	</h:form>
	
	<div class="duplaLinhaEmBranco"/>
	
	<h:form id="formListagemProdutos">
		<p:dataTable value="#{produtoMB.produtos}" var="produto" rendered="#{not empty produtoMB.produtos}" paginatorAlwaysVisible="false"  paginator="true" rows="10">
			<p:column sortBy="#{produto.nome}" headerText="Nome" filterMatchMode="contains" filterBy="#{produto.nome}">
				<h:outputText value="#{produto.nome}" />
			</p:column>
			
			<p:column sortBy="#{produto.descricao}" headerText="Descrição" filterMatchMode="contains" filterBy="#{produto.descricao}">
				<h:outputText value="#{produto.descricao}" />
			</p:column>
			
			<p:column sortBy="#{produto.preco}" headerText="Preço" styleClass="textoADireita" filterMatchMode="contains" filterBy="#{produto.preco}">
					
				<h:outputText value="#{produto.preco}">
					<f:convertNumber type="currency" minFractionDigits="2" maxFractionDigits="2"/>
				</h:outputText>
			</p:column>
			
			<p:column headerText="Alterar" styleClass="textoCentralizado">	
				<p:commandLink update=":formCadastroProduto" action="#{produtoMB.exibirProdutoAlteracao(produto)}" ajax="true">
					<p:graphicImage value="/resources/images/alterar.jpg" width="25px" height="25px" alt="Alterar"/>
				</p:commandLink>
			</p:column>
			
			<p:column headerText="Excluir" styleClass="textoCentralizado">
				<p:commandLink update="@form" action="#{produtoMB.excluirProduto(produto)}" ajax="true">
					<p:graphicImage value="/resources/images/excluir.jpg" width="25px" height="25px" alt="Excluir" />
				</p:commandLink>
			</p:column>			
		</p:dataTable>
	</h:form>	
</h:body>
</html>